<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>add</title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
        #d1{
            width: 400px;
            height: 440px;
            border: solid 0px red;
            margin: 0 auto;
            margin-top: 6%;
            margin-left: 35%;
            position: absolute;
            background-color: #eee;
            border-radius: 20px;
        }
        #d2{
            width: 300px;
            height: 300px;
            border: solid 0px blue;
            margin: 0 auto;
            margin-top: 14%;
            margin-left: 70px;
            position: relative;
        }
        #d2{
            /* 父元素相对 */
            position: relative;
        }
        #d2 figure{
            /* 子元素绝对 */
            position: absolute;
        }
        #d2 figure:nth-child(2){
            left: 5px;
            top: 5px;
        }
        #d2 figure:nth-child(3){
            left: 10px;
            top: 10px;
        }
        #d2 figure:nth-child(4){
            left: 15px;
            top: 15px;
        }
        #d2 figure:nth-child(5){
            left: 20px;
            top: 20px;
        }
        #d2 figure:nth-child(6){
            left: 15px;
            top: 25px;
        }
        #d2 figure:nth-child(7){
            left: 10px;
            top: 30px;
        }
        #d2 figure:nth-child(8){
            left: 5px;
            top: 35px;
        }
        #d2 figure:nth-child(9){
            left: 0px;
            top: 40px;
        }
        #d2 figure:hover{
            z-index: 0;
        }
        #d2 figure img{
            width: 240px;
            height: 280px;
        }
        #a1,#a2{
            width: 400px;
            height: 900px;
            border: solid 0px rgb(219, 211, 211);
            position: fixed;
        }
        #a1{
            left: 0;
        }
        #a2{
            right: 0;
        }
        img{
            border-radius: 20px;
        }
        #d1 p{
            margin-top: 10px;
        }
    </style>
</head>
<body>
        <div id="a1" ></div>
        <div id="a2"></div>
<div id="d1">
    <P>用户名：<input id="username" type="text"></P>
    <div id="d2">
        <figure><img id="1" draggable="true" src="../../../static/images/solutions_img02.jpg" ></figure>
        <figure><img id="2" draggable="true" src="../../../static/images/solutions_img12.jpg" ></figure>
        <figure><img id="3" draggable="true" src="../../../static/images/solutions_img03.jpg" ></figure>
        <figure><img id="4" draggable="true" src="../../../static/images/solutions_img07.jpg" ></figure>
        <figure><img id="5" draggable="true" src="../../../static/images/solutions_img08.jpg" ></figure>
        <figure><img id="6" draggable="true" src="../../../static/images/solutions_img09.jpg" ></figure>
        <figure><img id="7" draggable="true" src="../../../static/images/solutions_img10.jpg" ></figure>
        <figure><img id="8" draggable="true" src="../../../static/images/solutions_img11.jpg" ></figure>
        <figure><img id="9" draggable="true" src="../../../static/images/solutions_img01.jpg" ></figure>
    </div>
</div>
<script src="../../../static/js/jquery-1.11.3.js"></script>
<script src="../../../static/js/mycommon.js"></script>
</body>
<script type="text/javascript">
     //传数据库
    function sendSql(img_id,username,like) {
        var xhr = createXhr();
        var params = [img_id,username,like];

        var url = '/tec/get_img_id?params=' + params;
        console.log(url)
        xhr.open('get', url, true);
        xhr.onreadystatechange = function () {
            if (xhr.readyState == 4 && xhr.status == 200) {
                var res = xhr.responseText;
                //alert(params);
            }
        };
        xhr.send(null);
    }
window.onload=function() {
    var fig = document.getElementsByTagName('img');
    var ddiv1 = document.getElementById('a1');
    var ddiv2 = document.getElementById('a2')
    var tarfig = null

    for (var i = 0; i < fig.length; i++) {
        fig[i].ondragstart = function (ev) {
            tarfig = this;
        }
    }
    ddiv2.ondragover = function (ev) {
        ev.preventDefault()
    }
    ddiv2.ondrop = function () {
        console.log(tarfig.id)
        //存入数据库，不喜欢，id
        img_id = tarfig.id//你的图片id
        username = document.getElementById('username').value
        like = true;//喜欢
        sendSql(img_id, username,like)
        tarfig.parentNode.removeChild(tarfig);
    }
    ddiv1.ondragover = function (ev) {
        ev.preventDefault()
    }
    ddiv1.ondrop = function () {
        {#console.log(tarfig.id)#}
        img_id = tarfig.id//你的图片id
        username = document.getElementById('username').value
        like = false;//不喜欢
        sendSql(img_id, username,like)
        tarfig.parentNode.removeChild(tarfig);
    }
}


</script>
</html>